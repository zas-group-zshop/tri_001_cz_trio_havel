function evenDown(){$(".down-showAll").click(function(){$(this).text("Méně");$(this).removeClass("down-showAll");$(this).addClass("up-hide");$(this).parent(".cbx-left-filters").find(".vl-box-body ul li").each(function(){$(this).show()});eventUp()})}function initApp(){deleteCookieLogin();$(".RegFormDiscount input").change(function(){dicountHelper.init($(this).val())});$(".iqSearch a").click(function(){window.location=$(this).attr("href")});$(".order-addressess a").click(function(){$(this).find(".orderBox").addClass("active")});if($(nameClass).length>0){$("#search input[type='text']").keyup(function(){if($(this).val().length>0){searchHelper.init($(this).val())}});$("#search input[type='submit']").click(function(){if($("#search input[type='text']").val().length>0){$("#ctl00_ZasShopBodyPlaceHolder_UpdateProgress1").show()}});$("#search input[type='text']").change(function(){if($(this).val().length>0){searchHelper.init($(this).val())}});var template="<div id='iqSearch'></div>";$(nameClass).append(template)}$("body").click(function(){$("#iqSearch").hide()});searchHelper.initResumeSearch();rating.init()}function eventUp(){$(".up-hide").click(function(){$(this).addClass("down-showAll");$(this).removeClass("up-hide");$(this).text("Další");addHeightFilter($(this).parent(".cbx-left-filters"));evenDown()})}function addHeightFilter(c){var b=0;$(c.find(".vl-box-body ul li").get()).each(function(a){if($(this).find("input").attr("checked")){b++;var d=$(this);d.insertBefore(d.siblings(":eq(0)"))}else{if(a>4){$(this).hide()}}});if(c.find(".vl-box-body ul li").length>4&&c.find(".vl-box-body ul li").length!=b){c.find(".down-showAll").remove();c.append('<span class="btn btn-basic btn-sm down-showAll">Další</span>')}}function deleteCookieLogin(){function getCookie(){let matches=document.cookie.match(new RegExp("([^;]*)=userid=([^;]*)"));return matches?decodeURIComponent(matches[1]):undefined}function delete_cookie(name){if(name){document.cookie=name+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}}$("._logout").click(function(e){e.preventDefault();delete_cookie(getCookie());window.location=$(this).attr("href")})}var rating={init:function(){$(".rating").each(function(){if($(this).find(".ratingStar").length==0){const count=$(this).attr("date-star");$(this).addClass("ratingADD");for(let i=0;i<count;i++){const span=document.createElement("span");span.setAttribute("class","ratingStar emptyRatingStar numberStar"+i);span.setAttribute("data-numb",i);$(this).append(span)}}});rating.events()},events:function(){$(".ratingStar").click(function(){var number=parseInt($(this).attr("data-numb"));$(this).parent(".rating").find(".ratingStar").each(function(){$(this).removeClass("filledRatingStar").addClass("emptyRatingStar")});for(let i=0;i<=number;i++){$(".numberStar"+i).removeClass("emptyRatingStar").addClass("filledRatingStar")}$(this).parent(".rating").find("input").val(number+1)})}};var nameClass="._iqSearch";var searchHelper={init:function(search){this.ajaxCall("ft_txt="+search,true)},initResumeSearch:function(){if($("div[data-result-count='0']").length){this.ajaxCallTypo($(".search-result-expr").text().replace(/"/g,""),true)}},finish:function(data){if(data.result[1].nomenklatura_items.nomenklatura_item.nazev){$("div[data-result-count='0']").append("<a href='/Search/cs-CZ/0/"+data.result[1].nomenklatura_items.nomenklatura_item.nazev+"'>"+$("div[data-result-count='0']").attr("data-noresult-text").replace("{0}",data.result[1].nomenklatura_items.nomenklatura_item.nazev)+"</a>")}else if(data.result[0].items.item.nazev){$("div[data-result-count='0']").append("<a href='/Search/cs-CZ/0/"+data.result[0].items.item.nazev+"'>"+$("div[data-result-count='0']").attr("data-noresult-text").replace("{0}",data.result[0].items.item.nazev)+"</a>")}$(".main-page-description").removeClass("hidden-xs")},initAddText:function(){$(".no_url").click(function(){$("#search .keyword").val($(this).text()).trigger("change")})},ajaxCallTypo:function(data_send,async){$.ajax({url:"/ZasShopServicePage.aspx/&page-command=CHECK_SPELLING&text="+data_send,async:async,success:function(data){data=JSON.parse(data);if(data.root.results){searchHelper.finish(data.root.results)}},error:function(msg){console.debug(msg)},complete:function(){}})},ajaxCall:function(data_send,async){$.ajax({url:"/ZasShopServicePage.aspx/&command=GET_FULLTEXT_RESULT&"+data_send,async:async,success:function(data){data=JSON.parse(data);if(data.root.results){searchHelper.resultFormat(data.root.results.result)}},error:function(msg){console.debug(msg)},complete:function(){}})},addItem:function(item){let a=document.createElement("a");let li=document.createElement("li");li.textContent=item.nazev;if(item.web_items_url){a.setAttribute("href",item.web_items_url)}else{a.setAttribute("class","no_url")}if(item.pic_url){let img=document.createElement("img");img.setAttribute("src",item.pic_url);img.setAttribute("class","img");a.appendChild(img)}a.append(item.nazev);li.innerHTML="";li.append(a);return li},resultFormat:function(data){let div=document.createElement("div");div.setAttribute("class","sectionAll");$.each(data,function(){let section=document.createElement("div");section.setAttribute("class","section");if(this.description){let spanMain=document.createElement("span");spanMain.setAttribute("class","groupBlock");let span=document.createElement("span");span.setAttribute("class","name");span.textContent=this.description;spanMain.appendChild(span);section.appendChild(spanMain)}let ul=document.createElement("ul");let itemsNode=false;if(this.items){itemsNode=this.items.item}else if(this.nomenklatura_items){itemsNode=this.nomenklatura_items.nomenklatura_item}if(itemsNode){if(itemsNode.length){$.each(itemsNode,function(element,item){let itemNode=searchHelper.addItem(item);ul.appendChild(itemNode)})}else{let itemNode=searchHelper.addItem(itemsNode);ul.appendChild(itemNode)}}section.appendChild(ul);div.appendChild(section)});let iqSearch=document.getElementById("iqSearch");iqSearch.innerHTML="";iqSearch.append(div);let addAll=document.createElement("div");addAll.setAttribute("class","addAll");addAll.setAttribute("onclick",'$("#search .button").trigger("click");');addAll.textContent="Zobrazit všechny výsledky";iqSearch.append(addAll);if($("#search input[type='text']").is(":focus")){$("#iqSearch").show()}$(".addAll").click(function(){$("#search .button").trigger("click")});searchHelper.initAddText()}};$(document).ready(function(){initApp()});var dicountHelper={init:function(value){$(".message_discount").hide();value=value.replace(/\s/g,"");if(value.indexOf(",")>0){value=value.split(",");value=dicountHelper.removeUnique(value);$.each(value,function(el,item){dicountHelper.ajaxCall(item)})}else{dicountHelper.ajaxCall(value)}},removeUnique:function(value){var uniqueValues=[];$.each(value,function(i,el){if($.inArray(el,uniqueValues)===-1)uniqueValues.push(el)});return uniqueValues},ajaxCall:function(data_send,async){$.ajax({url:"/ZasShopServicePage.aspx/&command=CHECK_SL_KOD&sl_kod="+data_send,async:async,success:function(data){data=JSON.parse(data);if(data.root.is_ok==1){dicountHelper.resultFinish(data_send)}else{dicountHelper.resultFinishBadCode(data_send)}},error:function(msg){console.debug(msg)},complete:function(){}})},initDiscountOk:function(){$(".discountOk .close").click(function(){var text=$(this).parent(".discountOk").text().replace("x","");$(".discountCodeContainer").val($(".discountCodeContainer").val().replace(text+", ","").replace(text,""));$(this).parent(".discountOk").remove()})},resultFinish:function(value){let div=document.createElement("div");div.setAttribute("class","discountOk");div.innerText=value;let span=document.createElement("span");span.setAttribute("class","close");span.innerText="x";div.append(span);var oldValue="";if($(".discountCodeContainer").val()){oldValue=$(".discountCodeContainer").val()+", "}$(".discountCode").val("");$(".discountCodeContainer").val(oldValue+value);$(".RegFormDiscount").append(div);dicountHelper.initDiscountOk()},resultFinishBadCode:function(value){$(".message_discount").show()}};$(document).ready(function(){$(".cbx-left-filters").each(function(){addHeightFilter($(this))});evenDown();eventUp();setTimeout(function(){$(".cbx-left-filters").each(function(){addHeightFilter($(this))});evenDown();eventUp()},1e3);$(".js-mobile-btn").click(function(a){a.preventDefault();$(this).toggleClass("btn-basic");$("."+$(this).data("target")).toggleClass("hidden-xs")});$(".left-menu > ul > li.has-submenu > span").click(function(b){b.preventDefault();var a=$(this).parent(".has-submenu");if(a.hasClass("active")){a.removeClass("active")}else{a.toggleClass("submenu-is-opened")}});if(!$(".main-page-description").length){$(".js-btn-description").hide()}if(!$(".custom-search-box").length){$(".js-btn-filter").hide()}$(".js-btn-cart-advanced").click(function(a){a.preventDefault();$(".cart-advanced-buttons").toggle()});$(document).ready(function(){$("#log-show-body").click(function(a){a.preventDefault();$(".log-admin").toggleClass("log-body-opened")})});document.onkeydown=function(a){a=a||window.event;var b=false;if("key"in a){b=a.key=="Escape"||a.key=="Esc"}else{b=a.keyCode==27}if(b){$(".modal").prev().andSelf().hide()}};$(".user-popup-message").each(function(){var title=$(this).data("title");if($(this).data("error"))title='<span class="fa fa-times-circle fa-2x" '+'style="vertical-align:middle;color:#e10000;">'+"</span>&nbsp"+title;alertify.alert(title,$(this).html());return false});$(".user-popup-info").each(function(){var notification=alertify.notify($(this).html(),"success",5,function(){if(1==2)console.log("dismissed")});return false})});Sys.WebForms.PageRequestManager.getInstance().add_endRequest(initApp);