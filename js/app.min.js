function initApp(){deleteCookieLogin();dicountHelper.preInit();searchHelper.preInit();rating.init();$(".order-addressess a").click(function(){$(this).find(".orderBox").addClass("active")})}function evenDown(){$(".down-showAll").click(function(){$(this).text("Méně");$(this).removeClass("down-showAll");$(this).addClass("up-hide");$(this).parent(".cbx-left-filters").find(".vl-box-body ul li").each(function(){$(this).show()});eventUp()})}function eventUp(){$(".up-hide").click(function(){$(this).addClass("down-showAll");$(this).removeClass("up-hide");$(this).text("Další");addHeightFilter($(this).parent(".cbx-left-filters"));evenDown()})}function addHeightFilter(n){function i(){let n=document.cookie.match(new RegExp("([^;]*)=userid=([^;]*)"));return n?decodeURIComponent(n[1]):undefined}function r(n){n&&(document.cookie=n+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;")}var t=0;$(n.find(".vl-box-body ul li").get()).each(function(n){if($(this).find("input").attr("checked")){t++;var i=$(this);i.insertBefore(i.siblings(":eq(0)"))}else n>3&&$(this).hide()});n.find(".vl-box-body ul li").length>4&&n.find(".vl-box-body ul li").length!=t&&(n.find(".down-showAll").remove(),n.append('<span class="btn btn-basic btn-sm down-showAll">Další<\/span>'));$("._logout").click(function(n){n.preventDefault();r(i());window.location=$(this).attr("href")})}function deleteCookieLogin(){function n(){let n=document.cookie.match(new RegExp("([^;]*)=userid=([^;]*)"));return n?decodeURIComponent(n[1]):undefined}function t(n){n&&(document.cookie=n+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;")}$("._logout").click(function(i){i.preventDefault();t(n());window.location=$(this).attr("href")})}function OdbZaokrouhleniAllFce(n,t,i){var r=0,u=0,f=0;switch(i){case 9:r=1e5;break;case 8:r=1e4;break;case 7:r=1e3;break;case 6:r=100;break;case 5:r=10;break;case 4:r=1;break;case 3:r=.1;break;case 2:r=.01;break;case 1:r=.001;break;case 0:r=.0001}return u=(Math.abs(n)/r).toFixed(4),r>0&&(f=r.toString().length-1),u=t==0?Math.ceil(u):t==1?Math.floor(u):Math.round(u),(Math.sign(n)*u*r).toFixed(f)}var rating={init:function(){$(".rating").each(function(){if($(this).find(".ratingStar").length==0){const n=$(this).attr("date-star");$(this).addClass("ratingADD");for(let t=0;t<n;t++){const n=document.createElement("span");n.setAttribute("class","ratingStar emptyRatingStar numberStar"+t);n.setAttribute("data-numb",t);$(this).append(n)}}});rating.events()},events:function(){$(".ratingStar").click(function(){var n=parseInt($(this).attr("data-numb"));$(this).parent(".rating").find(".ratingStar").each(function(){$(this).removeClass("filledRatingStar").addClass("emptyRatingStar")});for(let t=0;t<=n;t++)$(".numberStar"+t).removeClass("emptyRatingStar").addClass("filledRatingStar");$(this).parent(".rating").find("input").val(n+1)})}},nameClass="._iqSearch",searchHelper={preInit:function(){if($(".iqSearch a").click(function(){window.location=$(this).attr("href")}),$(nameClass).length>0){$("#search input[type='text']").keyup(function(){$(this).val().length>0&&searchHelper.init($(this).val())});$("#search input[type='submit']").click(function(){$("#search input[type='text']").val().length>0&&$("#ctl00_ZasShopBodyPlaceHolder_UpdateProgress1").show()});$("#search input[type='text']").keyup(function(){$(this).val().length>0&&searchHelper.init($(this).val())});$("#search input[type='text']").change(function(){$(this).val().length>0&&searchHelper.init($(this).val())});$(nameClass).append("<div id='iqSearch'><\/div>")}$("body").click(function(){$("#iqSearch").hide()});searchHelper.initResumeSearch()},init:function(n){this.ajaxCall("ft_txt="+n,!0)},initResumeSearch:function(){$("div[data-result-count='0']").length&&this.ajaxCallTypo($(".search-result-expr").text().replace(/"/g,""),!0)},finish:function(n){n.result[1].nomenklatura_items.nomenklatura_item.nazev?$("div[data-result-count='0']").append("<a href='/Search/cs-CZ/0/"+n.result[1].nomenklatura_items.nomenklatura_item.nazev+"'>"+$("div[data-result-count='0']").attr("data-noresult-text").replace("{0}",n.result[1].nomenklatura_items.nomenklatura_item.nazev)+"<\/a>"):n.result[0].items.item.nazev&&$("div[data-result-count='0']").append("<a href='/Search/cs-CZ/0/"+n.result[0].items.item.nazev+"'>"+$("div[data-result-count='0']").attr("data-noresult-text").replace("{0}",n.result[0].items.item.nazev)+"<\/a>");$(".main-page-description").removeClass("hidden-xs")},initAddText:function(){$(".no_url").click(function(){$("#search .keyword").val($(this).text()).trigger("change")})},ajaxCallTypo:function(n,t){$.ajax({url:"/ZasShopServicePage.aspx/&page-command=CHECK_SPELLING&text="+n,"async":t,success:function(n){n=JSON.parse(n);n.root.results&&searchHelper.finish(n.root.results)},error:function(n){console.debug(n)},complete:function(){}})},ajaxCall:function(n,t){$.ajax({url:"/ZasShopServicePage.aspx/&command=GET_FULLTEXT_RESULT&"+n,"async":t,success:function(n){n=JSON.parse(n);n.root.results&&searchHelper.resultFormat(n.root.results.result)},error:function(n){console.debug(n)},complete:function(){}})},addItem:function(n){let t=document.createElement("a"),i=document.createElement("li");if(i.textContent=n.nazev,n.web_items_url?t.setAttribute("href",n.web_items_url):t.setAttribute("class","no_url"),n.pic_url){let i=document.createElement("img");i.setAttribute("src",n.pic_url);i.setAttribute("class","img");t.appendChild(i)}return t.append(n.nazev),i.innerHTML="",i.append(t),i},resultFormat:function(n){let i=document.createElement("div");i.setAttribute("class","sectionAll");$.each(n,function(){let t=document.createElement("div");if(t.setAttribute("class","section"),this.description){let n=document.createElement("span");n.setAttribute("class","groupBlock");let i=document.createElement("span");i.setAttribute("class","name");i.textContent=this.description;n.appendChild(i);t.appendChild(n)}let r=document.createElement("ul"),n=!1;if(this.items?n=this.items.item:this.nomenklatura_items&&(n=this.nomenklatura_items.nomenklatura_item),n)if(n.length)$.each(n,function(n,t){let i=searchHelper.addItem(t);r.appendChild(i)});else{let t=searchHelper.addItem(n);r.appendChild(t)}t.appendChild(r);i.appendChild(t)});let r=document.getElementById("iqSearch");r.innerHTML="";r.append(i);let t=document.createElement("div");t.setAttribute("class","addAll");t.setAttribute("onclick",'$("#search .button").trigger("click");');t.textContent="Zobrazit všechny výsledky";r.append(t);$("#search input[type='text']").is(":focus")&&$("#iqSearch").show();$(".addAll").click(function(){$("#search .button").trigger("click")});searchHelper.initAddText()}},dicountHelper={preInit:function(){var n=$(".RegFormDiscount input");n.change(function(n){n.preventDefault();dicountHelper.init()});n.keydown(function(n){n.keyCode==13&&(n.preventDefault(),dicountHelper.init())});$(".discountCodeContainer").val()&&$(".discountCodeContainer").val().length>0&&dicountHelper.init(!0)},init:function(n){$(".message_discount").hide();var t="";n?($(".discountOk").remove(),t=dicountHelper.removeUnique($(".discountCodeContainer").val())):t=dicountHelper.removeUnique($(".discountCode").val());t.indexOf(",")>=0?(t=t.split(","),$.each(t,function(n,t){t.length>0&&dicountHelper.ajaxCall(t)})):dicountHelper.ajaxCall(t)},removeUnique:function(n){return n.split(",").filter(function(n,t,i){return t==i.indexOf(n)}).join(",")},ajaxCall:function(n,t){$.ajax({url:"/ZasShopServicePage.aspx/&command=CHECK_SL_KOD&sl_kod="+n,"async":t,success:function(t){t=JSON.parse(t);t.root.is_ok==1?dicountHelper.resultFinish(n):dicountHelper.resultFinishBadCode(n)},error:function(n){console.debug(n)},complete:function(){}})},initDiscountOk:function(){$(".discountOk .close").click(function(){var n=$(this).parent(".discountOk").text().replace("x","");$(".discountCodeContainer").val($(".discountCodeContainer").val().replace(n+", ","").replace(n,""));$(this).parent(".discountOk").remove()})},generateDiv:function(n){let t=document.createElement("div");t.setAttribute("class","discountOk");t.setAttribute("data",n.toUpperCase());t.innerText=n;let i=document.createElement("span");i.setAttribute("class","close");i.innerText="x";t.append(i);$(".RegFormDiscount").append(t)},resultFinish:function(n){var i,t;n=n.toUpperCase();i=$(".discountCodeContainer").val();n.indexOf(i)<1&&(t=i+","+n,$(".discountCode").val(""),t=t.split(",").filter(function(n,t,i){return t==i.indexOf(n)}).join(","),$(".discountCodeContainer").val(t),$(".discountOk[data='"+n.toUpperCase()+"']").length<=0&&dicountHelper.generateDiv(n),dicountHelper.initDiscountOk())},resultFinishBadCode:function(){$(".message_discount").show()}};$(document).ready(function(){function n(n){var i=n.data("mj_zaokrouhleni"),r=n.data("mj_zaokr_mista"),t=n.val().replace(",",".");i!=null&&r!=null&&(isNaN(r)||isNaN(i)||isNaN(t)||r==""||i==""||t==""||(t=OdbZaokrouhleniAllFce(t,i,r),n.val(t)))}initApp();evenDown();eventUp();$(".cbx-left-filters").each(function(){addHeightFilter($(this))});setTimeout(function(){$(".cbx-left-filters").each(function(){addHeightFilter($(this))});evenDown();eventUp()},1e3);$(".js-mobile-btn").click(function(n){n.preventDefault();$(this).toggleClass("btn-basic");$("."+$(this).data("target")).toggleClass("hidden-xs")});$(".left-menu > ul > li.has-submenu > span").click(function(n){n.preventDefault();var t=$(this).parent(".has-submenu");t.hasClass("active")?t.removeClass("active"):t.toggleClass("submenu-is-opened")});$(".main-page-description").length||$(".js-btn-description").hide();$(".custom-search-box").length||$(".js-btn-filter").hide();$(".js-btn-cart-advanced").click(function(n){n.preventDefault();$(".cart-advanced-buttons").toggle()});$("#log-show-body").click(function(n){n.preventDefault();$(".log-admin").toggleClass("log-body-opened")});$(".keyword").bind("keyup",function(n){var t=n.keyCode||n.which;t===13&&$(this).siblings(".button").trigger("click")});document.onkeydown=function(n){n=n||window.event;var t=!1;t="key"in n?n.key=="Escape"||n.key=="Esc":n.keyCode==27;t&&$(".modal").prev().andSelf().hide()};$(".user-popup-message").each(function(){var n=$(this).data("title");return $(this).data("error")&&(n='<span class="fa fa-times-circle fa-2x" style="vertical-align:middle;color:#e10000;"><\/span>&nbsp'+n),alertify.alert(n,$(this).html()),!1});$(".user-popup-info").each(function(){var n=alertify.notify($(this).html(),"success",5,function(){!1&&console.log("dismissed")});return!1});$(".tb-quantity").change(function(){return n($(this)),!0});$(".tb-quantity").each(function(){return n($(this)),!0})});Sys?.WebForms?.PageRequestManager?.getInstance()?.add_endRequest(initApp);